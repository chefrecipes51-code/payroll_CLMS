@model PayrollMasterService.BAL.Models.CompanyProfile
@{
    var companyId = Context.Request.Query["companyId"].ToString();  // Get the companyId from the query string
}
@{
    ViewBag.HideBreadcrumb = true;
}
@* <link href="~/assets/src/css/croppie.css" rel="stylesheet" /> *@
<link href="~/assets/src/css/select2.min.css" rel="stylesheet">
<link rel="stylesheet" href="~/assets/src/scss/style.css">
<div class="breadcrumb-container">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <p class="breadcrumb-text"><span class="sprite-icons home-primary"></span></p>
            </li>
            <li class="breadcrumb-item primary">
                <a href="/company/companylist" class="breadcrumb-text">Company List</a>
            </li>
            <li class="breadcrumb-item active">
                <a class="breadcrumb-text">Company Details</a>
            </li>
        </ol>
    </nav>
</div>

<div class="app-layout">
    <div class="alert-custom" style="display:none;">
        <!-- use class for different alerts like (alert-success, alert-danger, alert-warning, alert-primary) -->
        <!-- Alert content will be dynamically inserted based on the alert type -->
    </div>
    <div class="title-container">
        <div class="current-back">
            <button class="btn btn-back-icon" onclick="window.location.href='/Company/CompanyList'">
                <span class="sprite-icons back-violet"></span>
            </button>
            <p class="title-primary">Company Profile</p>
            <input type="hidden" class="form-control" name="GlobalCompany_Id" id="GlobalCompany_Id" value="@Model.Company_Id" />
        </div>
        <div class="button-group">
           @*  <button class="btn btn-transparent-danger">reset All</button>
            <button class="btn btn_primary_outline_md">Cancel</button> *@
        </div>
    </div>

    <div class="row g-0">
        <div class="col-lg-3 col-md-3">
            <div class="vertical-tabs">
                <div class="vertical-tabs-fixed-layout">
                    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist"
                         aria-orientation="vertical">
                        <button class="nav-link" id="v-pills-home-tab" data-bs-toggle="pill"
                                data-bs-target="#v-pills-home" type="button" role="tab"
                                aria-controls="v-pills-home" aria-selected="true">
                            Basic Details
                        </button>
                        <button class="nav-link" id="v-pills-financial-tab" data-bs-toggle="pill"
                                data-bs-target="#v-pills-financial" type="button" role="tab"
                                aria-controls="v-pills-financial" aria-selected="false">
                            Financial Corresponding
                        </button>
                        <button class="nav-link" id="v-pills-profile-tab" data-bs-toggle="pill"
                                data-bs-target="#v-pills-profile" type="button" role="tab"
                                aria-controls="v-pills-profile" aria-selected="false">
                            Correspondences
                        </button>
                       
                        <button class="nav-link" id="v-pills-subsidiary-tab" data-bs-toggle="pill"
                                data-bs-target="#v-pills-subsidiary" type="button" role="tab"
                                aria-controls="v-pills-subsidiary" aria-selected="false">
                            Subsidiary
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-9 col-md-9">
            <div class="vertical-tab-content company-detail-tab-content">
                <div class="tab-content" id="v-pills-tabContent">
                    <div class="tab-pane fade show " id="v-pills-home" role="tabpanel"
                         aria-labelledby="v-pills-home-tab" tabindex="0">
                        @Html.Partial("_CompanyMaster", Model)                       
                    </div>
                    @Html.Partial("_CompanyConfiguration")

                    <div class="tab-pane fade show" id="v-pills-profile" role="tabpanel"
                         aria-labelledby="v-pills-profile-tab" tabindex="0">
                        @Html.Partial("_CompanyCorrespondances", Model.CompanyCorrespondances)                       
                    </div>
                  
                    <div class="tab-pane fade show " id="v-pills-subsidiary" role="tabpanel"
                         aria-labelledby="v-pills-subsidiary-tab" tabindex="0">
                        @Html.Partial("_CompanySubsidiary",Model.SubsidiaryMasteries)
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    <script src="~/assets/src/js/select2.min.js"></script>
  @*<script src="~/application/js/common/dropdown.js"></script>*@
    <script src="~/assets/src/custom-js/select2.js"></script>
    <script src="~/application/js/companymaster/demographicdata.js"></script>
    <script src="~/application/js/companymaster/companyconfiguration.js"></script>
    <script src="~/assets/src/js/bootstrap-datepicker.min.js"></script>
    <!-- date picker custom js file -->
    <script src="~/assets/src/custom-js/datepicker-ctm.js"></script>
    <script>
        $(document).ready(function () {

            $('#v-pills-financial-tab').on('click', function () {
                var startCompanyMasterDate = $('#v-pills-home #FromCompanyMasterSDate').val();
                var endCompanyMasterDate = $('#v-pills-home #FromCompanyMasterEDate').val();

                var formattedStartDateToDisplay = startCompanyMasterDate ? startCompanyMasterDate.split(" ")[0].split("-").reverse().join("-") : null;
                var formattedEndDateToDisplay = endCompanyMasterDate ? endCompanyMasterDate.split(" ")[0].split("-").reverse().join("-") : null;

                $('#v-pills-financial #sdate').val(formattedStartDateToDisplay);
                $('#v-pills-financial #edate').val(formattedEndDateToDisplay);

                // Disable fields if values are present
                if (formattedStartDateToDisplay) {
                    $('#v-pills-financial #sdate').prop('disabled', true);
                   
                }
                if (formattedEndDateToDisplay) {
                    $('#v-pills-financial #edate').prop('disabled', true);
                }
            });           
        });
    </script>
}